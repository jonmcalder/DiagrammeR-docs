<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The DiagrammeR Package</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Contains information on how to use the DiagrammeR package for R.">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="The DiagrammeR Package" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Contains information on how to use the DiagrammeR package for R." />
  <meta name="github-repo" content="rich-iannone/DiagrammeR-docs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The DiagrammeR Package" />
  <meta name="twitter:site" content="@riannone" />
  <meta name="twitter:description" content="Contains information on how to use the DiagrammeR package for R." />
  

<meta name="author" content="Richard Iannone">


<meta name="date" content="2017-03-21">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="creation.html">
<link rel="next" href="selections.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.8/htmlwidgets.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-0.9.1/grViz.js"></script>
<link href="libs/vis-4.17.0/vis.css" rel="stylesheet" />
<script src="libs/vis-4.17.0/vis.min.js"></script>
<script src="libs/visNetwork-binding-1.0.3/visNetwork.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="dgr-docs.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">The DiagrammeR Package</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>This book is not yet finished</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#why-model-data-as-a-graph"><i class="fa fa-check"></i><b>1.1</b> Why Model Data as a Graph?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#the-diagrammer-graph-object"><i class="fa fa-check"></i><b>1.2</b> The DiagrammeR Graph Object</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="creation.html"><a href="creation.html"><i class="fa fa-check"></i><b>2</b> Graph Creation</a><ul>
<li class="chapter" data-level="2.1" data-path="creation.html"><a href="creation.html#getting-started"><i class="fa fa-check"></i><b>2.1</b> Getting Started</a></li>
<li class="chapter" data-level="2.2" data-path="creation.html"><a href="creation.html#visualizing-a-simple-graph"><i class="fa fa-check"></i><b>2.2</b> Visualizing a Simple Graph</a><ul>
<li class="chapter" data-level="2.2.1" data-path="creation.html"><a href="creation.html#creating-nodes"><i class="fa fa-check"></i><b>2.2.1</b> Creating Nodes</a></li>
<li class="chapter" data-level="2.2.2" data-path="creation.html"><a href="creation.html#viewing-the-graph"><i class="fa fa-check"></i><b>2.2.2</b> Viewing the Graph</a></li>
<li class="chapter" data-level="2.2.3" data-path="creation.html"><a href="creation.html#piping-has-its-advantages"><i class="fa fa-check"></i><b>2.2.3</b> Piping Has Its Advantages</a></li>
<li class="chapter" data-level="2.2.4" data-path="creation.html"><a href="creation.html#adding-edges"><i class="fa fa-check"></i><b>2.2.4</b> Adding Edges</a></li>
<li class="chapter" data-level="2.2.5" data-path="creation.html"><a href="creation.html#deleting-graph-elements"><i class="fa fa-check"></i><b>2.2.5</b> Deleting Graph Elements</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="creation.html"><a href="creation.html#using-data-frames"><i class="fa fa-check"></i><b>2.3</b> Using Data Frames</a></li>
<li class="chapter" data-level="2.4" data-path="creation.html"><a href="creation.html#adding-basic-attributes"><i class="fa fa-check"></i><b>2.4</b> Adding Basic Attributes</a></li>
<li class="chapter" data-level="2.5" data-path="creation.html"><a href="creation.html#the-internal-ndfedf"><i class="fa fa-check"></i><b>2.5</b> The Internal NDF/EDF</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="attrs.html"><a href="attrs.html"><i class="fa fa-check"></i><b>3</b> Graph Attributes</a><ul>
<li class="chapter" data-level="3.1" data-path="attrs.html"><a href="attrs.html#external-ndfs-and-edfs"><i class="fa fa-check"></i><b>3.1</b> External NDFs and EDFs</a></li>
<li class="chapter" data-level="3.2" data-path="attrs.html"><a href="attrs.html#internal-ndfs-and-edfs"><i class="fa fa-check"></i><b>3.2</b> Internal NDFs and EDFs</a></li>
<li class="chapter" data-level="3.3" data-path="attrs.html"><a href="attrs.html#specific-nodes-or-edges"><i class="fa fa-check"></i><b>3.3</b> Specific Nodes or Edges</a></li>
<li class="chapter" data-level="3.4" data-path="attrs.html"><a href="attrs.html#adding-attributes-to-selections"><i class="fa fa-check"></i><b>3.4</b> Adding Attributes to Selections</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="selections.html"><a href="selections.html"><i class="fa fa-check"></i><b>4</b> Selections</a><ul>
<li class="chapter" data-level="4.1" data-path="selections.html"><a href="selections.html#setup-for-this-chapter"><i class="fa fa-check"></i><b>4.1</b> Setup for this Chapter</a></li>
<li class="chapter" data-level="4.2" data-path="selections.html"><a href="selections.html#the-selection-functions"><i class="fa fa-check"></i><b>4.2</b> The Selection Functions</a></li>
<li class="chapter" data-level="4.3" data-path="selections.html"><a href="selections.html#creating-a-node-selection"><i class="fa fa-check"></i><b>4.3</b> Creating a Node Selection</a></li>
<li class="chapter" data-level="4.4" data-path="selections.html"><a href="selections.html#creating-an-edge-selection"><i class="fa fa-check"></i><b>4.4</b> Creating an Edge Selection</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The DiagrammeR Package</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="attrs" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Graph Attributes</h1>
<p>A graph can often convey more useful information when aesthetic properties are applied to its rendered form.</p>
<div id="external-ndfs-and-edfs" class="section level2">
<h2><span class="header-section-number">3.1</span> External NDFs and EDFs</h2>
<p>One way to add node or edge attributes, using the functions weâ€™ve already explored, is to include these attributes and their values when generating node and edge data frames. For a node data frame, we can provide our own argument names and values when calling the <code>create_node_df()</code> function. In the example below, we provide values for <code>n</code> (the number of nodes, <code>4</code> in this case), <code>label</code>, and <code>type</code> but, in addition, we add the columns: <code>color</code>, <code>shape</code>, and <code>data</code>. Note that we either provide a single-length vector (i.e., a single value) or an <em>n</em>-length vector. Anything in between results in <code>NA</code> values applied to fill in the length of the data frame. The <code>color</code> and <code>shape</code> node attributes are instantly recognized by the <strong>Graphviz</strong> rendering engine. (Having the correct types of values are important here, more on that later.) The <code>data</code> column is ignored by the rendering engine, however, it is useful to have for other reasons (more on this later, as well).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a node data frame and display it</span>
ndf &lt;-
<span class="st">  </span><span class="kw">create_node_df</span>(
    <span class="dt">n =</span> <span class="dv">4</span>,
    <span class="dt">label =</span> <span class="ot">TRUE</span>,
    <span class="dt">type =</span> <span class="st">&quot;lower&quot;</span>,
    <span class="dt">color =</span> <span class="st">&quot;lightgreen&quot;</span>,
    <span class="dt">shape =</span> <span class="kw">c</span>(<span class="st">&quot;circle&quot;</span>, <span class="st">&quot;circle&quot;</span>,
              <span class="st">&quot;rectangle&quot;</span>, <span class="st">&quot;rectangle&quot;</span>),
    <span class="dt">data =</span> <span class="kw">c</span>(<span class="fl">2.5</span>, <span class="fl">5.6</span>, <span class="fl">7.4</span>, <span class="fl">1.7</span>))

ndf</code></pre></div>
<pre><code>##   id  type label      color     shape data
## 1  1 lower     1 lightgreen    circle  2.5
## 2  2 lower     2 lightgreen    circle  5.6
## 3  3 lower     3 lightgreen rectangle  7.4
## 4  4 lower     4 lightgreen rectangle  1.7</code></pre>
<p>We can include this node data frame in a new graph and then render it using the Graphviz engine (using <code>render_graph()</code> with no arguments except <code>graph</code>). Letâ€™s have a look.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Incorporate the node data frame into a</span>
<span class="co"># new graph and display that graph; note that</span>
<span class="co"># there are styling attributes being used</span>
graph_4n &lt;-
<span class="st">  </span><span class="kw">create_graph</span>(
    <span class="dt">nodes_df =</span> ndf)

<span class="kw">render_graph</span>(graph_4n)</code></pre></div>
<div id="htmlwidget-48f58d38f33c9ce76717" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-48f58d38f33c9ce76717">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
<p>We can take a very similar approach to adding styling attributes and a data column to an edge data frame with the <code>create_edge_df()</code> function. Here, letâ€™s add the <code>penwidth</code> (line thicknesses for edges) and the <code>color</code> styling attributes as well as a <code>data</code> attribute column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create an edge data frame</span>
edf &lt;-
<span class="st">  </span><span class="kw">create_edge_df</span>(
    <span class="dt">from =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>),
    <span class="dt">to =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>),
    <span class="dt">rel =</span> <span class="st">&quot;related_to&quot;</span>,
    <span class="dt">penwidth =</span> <span class="kw">c</span>(<span class="fl">2.5</span>, <span class="fl">0.5</span>, <span class="fl">1.0</span>),
    <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">&quot;pink&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;lightblue&quot;</span>),
    <span class="dt">data =</span> <span class="kw">c</span>(<span class="fl">1.1</span>, <span class="fl">5.2</span>, <span class="fl">3.4</span>))

edf</code></pre></div>
<pre><code>##   id from to        rel penwidth     color data
## 1  1    1  2 related_to      2.5      pink  1.1
## 2  2    4  1 related_to      0.5       red  5.2
## 3  3    3  1 related_to      1.0 lightblue  3.4</code></pre>
<p>Now that we have the edge data frame (<code>edf</code>), letâ€™s <em>add</em> that to the graph with the <code>add_edge_df()</code> function. Then, render the graph to see the styled nodes and edges.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Add the edge data frame to the graph</span>
<span class="co"># object, then, render the graph</span>
graph_4n_3e &lt;-
<span class="st">  </span>graph_4n %&gt;%
<span class="st">  </span><span class="kw">add_edge_df</span>(
    <span class="dt">edge_df =</span> edf)

<span class="kw">render_graph</span>(graph_4n_3e)</code></pre></div>
<div id="htmlwidget-830d275734b919df1d5f" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-830d275734b919df1d5f">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\"] \n\"1\"->\"2\" [id = \"1\", penwidth = \"2.5\", color = \"pink\"] \n\"4\"->\"1\" [id = \"2\", penwidth = \"0.5\", color = \"red\"] \n\"3\"->\"1\" [id = \"3\", penwidth = \"1\", color = \"lightblue\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="internal-ndfs-and-edfs" class="section level2">
<h2><span class="header-section-number">3.2</span> Internal NDFs and EDFs</h2>
<p>We can use the <code>data</code> fields for both the nodes and the edges to create styling attributes. Doing this generally requires scaling of the values (if they are numerical data, and they are in this case) and generating a new column in the internal ndf or edf thatâ€™s named for the styling attribute. Thankfully, we have some useful functions to help with this: <code>rescale_node_attrs()</code> and <code>rescale_edge_attrs()</code>. Letâ€™s look at an example of how this works for scaling up the sizes of the node shape:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create the `width` node attribute column</span>
<span class="co"># by scaling the values in the `data` column</span>
<span class="co"># to between 0.5 and 1.5 units</span>
graph_scaled_nodes &lt;-
<span class="st">  </span>graph_4n_3e %&gt;%
<span class="st">    </span><span class="kw">rescale_node_attrs</span>(
      <span class="dt">node_attr_from =</span> <span class="st">&quot;data&quot;</span>,
      <span class="dt">to_lower_bound =</span> <span class="fl">0.5</span>,
      <span class="dt">to_upper_bound =</span> <span class="fl">1.5</span>,
      <span class="dt">node_attr_to =</span> <span class="st">&quot;width&quot;</span>)

<span class="co"># Display the graph with the new styling</span>
<span class="co"># attribute applied</span>
<span class="kw">render_graph</span>(graph_scaled_nodes)</code></pre></div>
<div id="htmlwidget-e624aff46a0942badb20" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-e624aff46a0942badb20">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\", width = \"0.64\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\", width = \"1.184\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\", width = \"1.5\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\", width = \"0.5\"] \n\"1\"->\"2\" [id = \"1\", penwidth = \"2.5\", color = \"pink\"] \n\"4\"->\"1\" [id = \"2\", penwidth = \"0.5\", color = \"red\"] \n\"3\"->\"1\" [id = \"3\", penwidth = \"1\", color = \"lightblue\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
<p>This looks pretty good and, conceptually, it isnâ€™t too difficult to reason about generating new columns with specific attribute names based on data in existing columns. Notice that the circular nodes were scaled up or down evenly whereas the rectangular one was only scaled horizontally (and this makes sense, we made a <code>width</code> attribute/column). If we wanted scaling both in <code>width</code> and in <code>height</code>, we also need a height column with the same scaled values. There is a set of functions to make this process easier: <code>copy_node_attrs()</code> and <code>copy_edge_attrs()</code>. It simply copies values from one attribute to a new attribute.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Copy the `width` attribute values to</span>
<span class="co"># a new `height` attribute; because we</span>
<span class="co"># want square rectangles</span>
graph_square_rects &lt;-
<span class="st">  </span>graph_scaled_nodes %&gt;%
<span class="st">    </span><span class="kw">copy_node_attrs</span>(
      <span class="dt">node_attr_from =</span> <span class="st">&quot;width&quot;</span>,
      <span class="dt">node_attr_to =</span> <span class="st">&quot;height&quot;</span>)

<span class="co"># Display the graph and observe squares</span>
<span class="kw">render_graph</span>(graph_square_rects)</code></pre></div>
<div id="htmlwidget-293bbe2bea9f08922170" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-293bbe2bea9f08922170">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\", width = \"0.64\", height = \"0.64\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\", width = \"1.184\", height = \"1.184\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\", width = \"1.5\", height = \"1.5\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\", width = \"0.5\", height = \"0.5\"] \n\"1\"->\"2\" [id = \"1\", penwidth = \"2.5\", color = \"pink\"] \n\"4\"->\"1\" [id = \"2\", penwidth = \"0.5\", color = \"red\"] \n\"3\"->\"1\" [id = \"3\", penwidth = \"1\", color = \"lightblue\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
<p>Letâ€™s move onto some modifications of the edges. We have already applied some color values manually when constructing the edge data frame before its incorporation into the graph. Letâ€™s use the <code>data</code> values available in the internal edge data frame to create scaled colors. Weâ€™ll essentially replace the <code>color</code> attribute values already present and scale between the <code>grey85</code> and <code>grey25</code> colors with the <code>rescale_edge_attrs()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create the `color` edge attribute column</span>
<span class="co"># by scaling the values in the `data` column</span>
<span class="co"># to between the `grey85` to `grey25` colors</span>
graph_grey_edges &lt;-
<span class="st">  </span>graph_square_rects %&gt;%
<span class="st">    </span><span class="kw">rescale_edge_attrs</span>(
      <span class="dt">edge_attr_from =</span> <span class="st">&quot;data&quot;</span>,
      <span class="dt">to_lower_bound =</span> <span class="st">&quot;grey85&quot;</span>,
      <span class="dt">to_upper_bound =</span> <span class="st">&quot;grey25&quot;</span>,
      <span class="dt">edge_attr_to =</span> <span class="st">&quot;color&quot;</span>)

<span class="co"># Display the graph with newly grayed edges</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_grey_edges)</code></pre></div>
<div id="htmlwidget-d886d10607ef43ce93ba" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-d886d10607ef43ce93ba">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\", width = \"0.64\", height = \"0.64\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\", width = \"1.184\", height = \"1.184\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\", width = \"1.5\", height = \"1.5\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\", width = \"0.5\", height = \"0.5\"] \n\"1\"->\"2\" [id = \"1\", penwidth = \"2.5\", color = \"#D9D9D9\"] \n\"4\"->\"1\" [id = \"2\", penwidth = \"0.5\", color = \"#404040\"] \n\"3\"->\"1\" [id = \"3\", penwidth = \"1\", color = \"#7F7F7F\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="specific-nodes-or-edges" class="section level2">
<h2><span class="header-section-number">3.3</span> Specific Nodes or Edges</h2>
<p>We can set node or edge attribute values for all nodes or edges in a graph, or, for specific nodes or edges in a graph. These additions can be done with the <code>set_node_attrs()</code> and <code>set_edge_attrs()</code> functions. Letâ€™s create a random graph with 10 nodes and 15 edges and color some nodes and edges.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a random graph and set the</span>
<span class="co"># `fillcolor` as `lightgreen` for all</span>
<span class="co"># nodes in the graph, and, set `color`</span>
<span class="co"># as `blue` for all graph edges</span>
graph_1 &lt;-
<span class="st">  </span><span class="kw">create_random_graph</span>(
    <span class="dt">n =</span> <span class="dv">10</span>,
    <span class="dt">m =</span> <span class="dv">15</span>,
    <span class="dt">directed =</span> <span class="ot">TRUE</span>,
    <span class="dt">set_seed =</span> <span class="dv">23</span>) %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;fillcolor&quot;</span>,
    <span class="dt">values =</span> <span class="st">&quot;lightgreen&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">set_edge_attrs</span>(
    <span class="dt">edge_attr =</span> <span class="st">&quot;color&quot;</span>,
    <span class="dt">values =</span> <span class="st">&quot;blue&quot;</span>)

<span class="co"># Display the blue and green graph</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_1)</code></pre></div>
<div id="htmlwidget-7271d8dc1d4074a43528" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-7271d8dc1d4074a43528">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"lightgreen\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"lightgreen\"] \n  \"4\" [label = \"4\", fillcolor = \"lightgreen\"] \n  \"5\" [label = \"5\", fillcolor = \"lightgreen\"] \n  \"6\" [label = \"6\", fillcolor = \"lightgreen\"] \n  \"7\" [label = \"7\", fillcolor = \"lightgreen\"] \n  \"8\" [label = \"8\", fillcolor = \"lightgreen\"] \n  \"9\" [label = \"9\", fillcolor = \"lightgreen\"] \n  \"10\" [label = \"10\", fillcolor = \"lightgreen\"] \n\"6\"->\"10\" [id = \"1\", color = \"blue\"] \n\"5\"->\"6\" [id = \"2\", color = \"blue\"] \n\"2\"->\"10\" [id = \"3\", color = \"blue\"] \n\"2\"->\"7\" [id = \"4\", color = \"blue\"] \n\"5\"->\"10\" [id = \"5\", color = \"blue\"] \n\"1\"->\"7\" [id = \"6\", color = \"blue\"] \n\"3\"->\"7\" [id = \"7\", color = \"blue\"] \n\"3\"->\"9\" [id = \"8\", color = \"blue\"] \n\"7\"->\"9\" [id = \"9\", color = \"blue\"] \n\"6\"->\"9\" [id = \"10\", color = \"blue\"] \n\"9\"->\"10\" [id = \"11\", color = \"blue\"] \n\"2\"->\"3\" [id = \"12\", color = \"blue\"] \n\"1\"->\"6\" [id = \"13\", color = \"blue\"] \n\"4\"->\"6\" [id = \"14\", color = \"blue\"] \n\"2\"->\"5\" [id = \"15\", color = \"blue\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
<p>We can be more selective with the node and edge coloring (or with any other attributes or data we would like to apply).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Set attribute `fillcolor` as `orange`</span>
<span class="co"># for nodes `1` and `3` in the graph;</span>
<span class="co"># for edges, set `color` to `red` for</span>
<span class="co"># all those edges leading to nodes</span>
<span class="co"># `7` and `10`</span>
graph_2 &lt;-
<span class="st">  </span>graph_1 %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;fillcolor&quot;</span>,
    <span class="dt">values =</span> <span class="st">&quot;orange&quot;</span>,
    <span class="dt">nodes =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)) %&gt;%
<span class="st">  </span><span class="kw">set_edge_attrs</span>(
    <span class="dt">edge_attr =</span> <span class="st">&quot;color&quot;</span>,
    <span class="dt">values =</span> <span class="st">&quot;red&quot;</span>, 
    <span class="dt">to =</span> <span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">10</span>))

<span class="co"># Display that multicolored graph</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_2)</code></pre></div>
<div id="htmlwidget-631f66076c947d323f74" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-631f66076c947d323f74">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"orange\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"orange\"] \n  \"4\" [label = \"4\", fillcolor = \"lightgreen\"] \n  \"5\" [label = \"5\", fillcolor = \"lightgreen\"] \n  \"6\" [label = \"6\", fillcolor = \"lightgreen\"] \n  \"7\" [label = \"7\", fillcolor = \"lightgreen\"] \n  \"8\" [label = \"8\", fillcolor = \"lightgreen\"] \n  \"9\" [label = \"9\", fillcolor = \"lightgreen\"] \n  \"10\" [label = \"10\", fillcolor = \"lightgreen\"] \n\"6\"->\"10\" [id = \"1\", color = \"red\"] \n\"5\"->\"6\" [id = \"2\", color = \"blue\"] \n\"2\"->\"10\" [id = \"3\", color = \"red\"] \n\"2\"->\"7\" [id = \"4\", color = \"red\"] \n\"5\"->\"10\" [id = \"5\", color = \"red\"] \n\"1\"->\"7\" [id = \"6\", color = \"red\"] \n\"3\"->\"7\" [id = \"7\", color = \"red\"] \n\"3\"->\"9\" [id = \"8\", color = \"blue\"] \n\"7\"->\"9\" [id = \"9\", color = \"blue\"] \n\"6\"->\"9\" [id = \"10\", color = \"blue\"] \n\"9\"->\"10\" [id = \"11\", color = \"red\"] \n\"2\"->\"3\" [id = \"12\", color = \"blue\"] \n\"1\"->\"6\" [id = \"13\", color = \"blue\"] \n\"4\"->\"6\" [id = \"14\", color = \"blue\"] \n\"2\"->\"5\" [id = \"15\", color = \"blue\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
<p>Finally, individual edges can be targeted if supplying vectors for both the <code>from</code> and <code>to</code> arguments.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Set attribute `color = &quot;black&quot;` for edges</span>
<span class="co"># `7`-&gt;`9` and `1`-&gt;`6` using the edge</span>
<span class="co"># data frame</span>
graph_3 &lt;-
<span class="st">  </span>graph_2 %&gt;%
<span class="st">    </span><span class="kw">set_edge_attrs</span>(
      <span class="dt">edge_attr =</span> <span class="st">&quot;color&quot;</span>,
      <span class="dt">values =</span> <span class="st">&quot;black&quot;</span>,
      <span class="dt">from =</span> <span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">1</span>),
      <span class="dt">to =</span> <span class="kw">c</span>(<span class="dv">9</span>, <span class="dv">6</span>))

<span class="co"># Display the graph</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_3)</code></pre></div>
<div id="htmlwidget-4251e9f06c86c154c4dd" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-4251e9f06c86c154c4dd">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"orange\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"orange\"] \n  \"4\" [label = \"4\", fillcolor = \"lightgreen\"] \n  \"5\" [label = \"5\", fillcolor = \"lightgreen\"] \n  \"6\" [label = \"6\", fillcolor = \"lightgreen\"] \n  \"7\" [label = \"7\", fillcolor = \"lightgreen\"] \n  \"8\" [label = \"8\", fillcolor = \"lightgreen\"] \n  \"9\" [label = \"9\", fillcolor = \"lightgreen\"] \n  \"10\" [label = \"10\", fillcolor = \"lightgreen\"] \n\"6\"->\"10\" [id = \"1\", color = \"red\"] \n\"5\"->\"6\" [id = \"2\", color = \"blue\"] \n\"2\"->\"10\" [id = \"3\", color = \"red\"] \n\"2\"->\"7\" [id = \"4\", color = \"red\"] \n\"5\"->\"10\" [id = \"5\", color = \"red\"] \n\"1\"->\"7\" [id = \"6\", color = \"red\"] \n\"3\"->\"7\" [id = \"7\", color = \"red\"] \n\"3\"->\"9\" [id = \"8\", color = \"blue\"] \n\"7\"->\"9\" [id = \"9\", color = \"black\"] \n\"6\"->\"9\" [id = \"10\", color = \"blue\"] \n\"9\"->\"10\" [id = \"11\", color = \"red\"] \n\"2\"->\"3\" [id = \"12\", color = \"blue\"] \n\"1\"->\"6\" [id = \"13\", color = \"black\"] \n\"4\"->\"6\" [id = \"14\", color = \"blue\"] \n\"2\"->\"5\" [id = \"15\", color = \"blue\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="adding-attributes-to-selections" class="section level2">
<h2><span class="header-section-number">3.4</span> Adding Attributes to Selections</h2>
<p>There is a large number of functions that store either a selection of nodes or edges within the graph object. Such functions begin with <code>select_...</code> and <code>trav_...</code>. Complementing this class of functions are functions that take a graph with an active selection and perform some transformation based on the selection of nodes or edges. These functions are identifiable by ending with <code>...ws</code> (with selection). Weâ€™ll devote two entire chapters on the <code>select...()</code> and <code>trav...()</code> functions but, for now, weâ€™ll provide simple use cases with <code>select_nodes()</code> and <code>select_edges()</code>.</p>
<p>So, if we can make a selection of nodes or edges (but not both at the same time), how do we style these groups? We can do it with the <code>set_node_attrs_ws()</code> and <code>set_edge_attrs_ws()</code> functions. In this example, letâ€™s make a simple graph, select 2 of the 4 nodes using <code>select_nodes()</code> and specifying <code>nodes = c(1, 2)</code>, add <code>fillcolor</code> attribute values of <code>lightgreen</code> for those nodes with <code>set_node_attrs_ws()</code>, and then clear the selection with <code>clear_selection()</code> (it clears any selection of nodes or edges).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a simple graph, select nodes</span>
<span class="co"># `1` and `2`, color them light green;</span>
<span class="co"># clear the selection</span>
graph_4 &lt;-
<span class="st">  </span><span class="kw">create_graph</span>() %&gt;%
<span class="st">  </span><span class="kw">add_path</span>(<span class="dv">4</span>) %&gt;%
<span class="st">  </span><span class="kw">select_nodes</span>(
    <span class="dt">nodes =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs_ws</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;fillcolor&quot;</span>,
    <span class="dt">value =</span> <span class="st">&quot;lightgreen&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">clear_selection</span>()

<span class="co"># As a further aside on functions, we</span>
<span class="co"># can equivalently use the function</span>
<span class="co"># `select_nodes_by_id()` in the place</span>
<span class="co"># of `select_nodes()` in this instance</span>
<span class="co"># and achieve the same result; let&#39;s</span>
<span class="co"># now render the graph</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_4)</code></pre></div>
<div id="htmlwidget-eee3f3d238e4a651a41a" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-eee3f3d238e4a651a41a">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"lightgreen\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"\"] \n  \"4\" [label = \"4\", fillcolor = \"\"] \n\"1\"->\"2\" [id = \"1\"] \n\"2\"->\"3\" [id = \"2\"] \n\"3\"->\"4\" [id = \"3\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
<p>We can follow a similar sequence for modifying edge attributes for some edges with <code>select_edges()</code> and <code>set_edge_attrs_ws()</code>. Note that we also use <code>clear_selection()</code> as before to clear the active selection which is, in this case, a selection of edges.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Take `graph_4`, select edges</span>
<span class="co"># `1-&gt;2` and `2-&gt;3`, color those red</span>
<span class="co"># and then clear the selection</span>
graph_5 &lt;-
<span class="st">  </span>graph_4 %&gt;%
<span class="st">  </span><span class="kw">select_edges</span>(
    <span class="dt">from =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),
    <span class="dt">to =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)) %&gt;%
<span class="st">  </span><span class="kw">set_edge_attrs_ws</span>(
    <span class="dt">edge_attr =</span> <span class="st">&quot;color&quot;</span>,
    <span class="dt">value =</span> <span class="st">&quot;red&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">clear_selection</span>()
  
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_5)</code></pre></div>
<div id="htmlwidget-42e69d9c995dea2497f2" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-42e69d9c995dea2497f2">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"lightgreen\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"\"] \n  \"4\" [label = \"4\", fillcolor = \"\"] \n\"1\"->\"2\" [id = \"1\", color = \"red\"] \n\"2\"->\"3\" [id = \"2\", color = \"red\"] \n\"3\"->\"4\" [id = \"3\", id = \"3\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
<p>There are a few more <code>select_...()</code> functions that are useful and they allow you to make selections based on properties of nodes or edges in a graph. For nodes, these include:</p>
<ul>
<li><code>select_nodes_by_degree()</code>: supply some information on degree (number of connections to/from/total for a node) to an <code>expressions</code> argument and a selection of nodes satisfying the expressions will be made</li>
<li><code>select_nodes_in_neighborhood()</code>: create a selection of nodes based on a walk distance from a specified node (supplying a single node ID for <code>node</code>)</li>
<li><code>select_last_nodes_created()</code>: if you just created a large amount of nodes, you can select them straight away with this function and then apply some transformation with a <code>..._ws()</code> function like <code>set_node_attrs_ws()</code></li>
</ul>
<p>The <code>select_nodes()</code> function also has some advanced functionality that can be accessed by supplying filtering statements to its <code>conditions</code> argument. Moreover, the <code>select_edges()</code> function also has selective filtering capabilities. More details are available on this in a later chapter, but for now it is good to know that this is possible.</p>
<p>In addition, edges can be selected with:</p>
<ul>
<li><code>select_edges_by_edge_id()</code>: given some edge ID values, select those exact edges</li>
<li><code>select_edges_by_node_id()</code>: given some node ID values, select all edges associated (i.e., linked to or from) those nodes</li>
<li><code>select_last_edges_created()</code>: analogous to the <code>select_last_nodes_created()</code> function; useful for applying attribute values to just-created edges</li>
</ul>
<p>These functions are best illustrated with a few examples. First, letâ€™s make a random graph (<code>26</code> nodes and <code>52</code> edges) and select nodes with a total degree (number of edges inbound + number of edges outbound) greater than or equal to <code>6</code>. The graph will be generated by the <code>create_random_graph()</code> function, the selection will be performed by the <code>select_nodes_by_degree()</code> function (using <code>expressions = &quot;deg &gt;= 6&quot;</code> to express our filtering of nodes by total degree), and the coloring of the selected nodes will be accomplished using the <code>set_node_attrs_ws()</code> function. Weâ€™ll also do another interesting thing: color all nodes not satisfying our stated condition. This last modification will be done by inverting the node selection with <code>invert_selection()</code> and then using <code>set_node_attrs_ws()</code> again, this time on the complementary node selection.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a random graph and label</span>
<span class="co"># nodes by letters of the alphabet</span>
graph_26n_52e &lt;-
<span class="st">  </span><span class="kw">create_random_graph</span>(
    <span class="dt">n =</span> <span class="dv">26</span>,
    <span class="dt">m =</span> <span class="dv">52</span>,
    <span class="dt">directed =</span> <span class="ot">TRUE</span>,
    <span class="dt">set_seed =</span> <span class="dv">23</span>) %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;label&quot;</span>,
    <span class="dt">values =</span> LETTERS) %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;type&quot;</span>,
    <span class="dt">values =</span> <span class="st">&quot;letter&quot;</span>)

<span class="co"># Select nodes that have a (total)</span>
<span class="co"># degree &gt;= 6, color these nodes</span>
<span class="co"># `purple` and the rest `lightgreen`</span>
graph_26n_52e &lt;-
<span class="st">  </span>graph_26n_52e %&gt;%
<span class="st">  </span><span class="kw">select_nodes_by_degree</span>(
    <span class="dt">expressions =</span> <span class="st">&quot;deg &gt;= 6&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs_ws</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;fillcolor&quot;</span>,
    <span class="dt">value =</span> <span class="st">&quot;purple&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">invert_selection</span>() %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs_ws</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;fillcolor&quot;</span>,
    <span class="dt">value =</span> <span class="st">&quot;lightgreen&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">clear_selection</span>()

<span class="co"># Render the graph</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_26n_52e)</code></pre></div>
<div id="htmlwidget-52acd1c1f4a52c90a079" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-52acd1c1f4a52c90a079">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"A\", fillcolor = \"lightgreen\"] \n  \"2\" [label = \"B\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"C\", fillcolor = \"lightgreen\"] \n  \"4\" [label = \"D\", fillcolor = \"purple\"] \n  \"5\" [label = \"E\", fillcolor = \"purple\"] \n  \"6\" [label = \"F\", fillcolor = \"lightgreen\"] \n  \"7\" [label = \"G\", fillcolor = \"lightgreen\"] \n  \"8\" [label = \"H\", fillcolor = \"purple\"] \n  \"9\" [label = \"I\", fillcolor = \"lightgreen\"] \n  \"10\" [label = \"J\", fillcolor = \"lightgreen\"] \n  \"11\" [label = \"K\", fillcolor = \"lightgreen\"] \n  \"12\" [label = \"L\", fillcolor = \"lightgreen\"] \n  \"13\" [label = \"M\", fillcolor = \"lightgreen\"] \n  \"14\" [label = \"N\", fillcolor = \"purple\"] \n  \"15\" [label = \"O\", fillcolor = \"lightgreen\"] \n  \"16\" [label = \"P\", fillcolor = \"lightgreen\"] \n  \"17\" [label = \"Q\", fillcolor = \"purple\"] \n  \"18\" [label = \"R\", fillcolor = \"lightgreen\"] \n  \"19\" [label = \"S\", fillcolor = \"lightgreen\"] \n  \"20\" [label = \"T\", fillcolor = \"purple\"] \n  \"21\" [label = \"U\", fillcolor = \"lightgreen\"] \n  \"22\" [label = \"V\", fillcolor = \"lightgreen\"] \n  \"23\" [label = \"W\", fillcolor = \"lightgreen\"] \n  \"24\" [label = \"X\", fillcolor = \"lightgreen\"] \n  \"25\" [label = \"Y\", fillcolor = \"lightgreen\"] \n  \"26\" [label = \"Z\", fillcolor = \"lightgreen\"] \n\"12\"->\"15\" [id = \"1\"] \n\"17\"->\"24\" [id = \"2\"] \n\"2\"->\"14\" [id = \"3\"] \n\"14\"->\"18\" [id = \"4\"] \n\"10\"->\"21\" [id = \"5\"] \n\"4\"->\"20\" [id = \"6\"] \n\"5\"->\"8\" [id = \"7\"] \n\"5\"->\"22\" [id = \"8\"] \n\"5\"->\"16\" [id = \"9\"] \n\"14\"->\"23\" [id = \"10\"] \n\"4\"->\"19\" [id = \"11\"] \n\"18\"->\"24\" [id = \"12\"] \n\"17\"->\"20\" [id = \"13\"] \n\"3\"->\"10\" [id = \"14\"] \n\"14\"->\"16\" [id = \"15\"] \n\"2\"->\"3\" [id = \"16\"] \n\"4\"->\"21\" [id = \"17\"] \n\"10\"->\"25\" [id = \"18\"] \n\"13\"->\"20\" [id = \"19\"] \n\"13\"->\"17\" [id = \"20\"] \n\"2\"->\"15\" [id = \"21\"] \n\"5\"->\"25\" [id = \"22\"] \n\"4\"->\"23\" [id = \"23\"] \n\"12\"->\"20\" [id = \"24\"] \n\"7\"->\"23\" [id = \"25\"] \n\"13\"->\"25\" [id = \"26\"] \n\"19\"->\"25\" [id = \"27\"] \n\"19\"->\"22\" [id = \"28\"] \n\"15\"->\"22\" [id = \"29\"] \n\"1\"->\"7\" [id = \"30\"] \n\"4\"->\"8\" [id = \"31\"] \n\"16\"->\"26\" [id = \"32\"] \n\"8\"->\"20\" [id = \"33\"] \n\"15\"->\"19\" [id = \"34\"] \n\"4\"->\"17\" [id = \"35\"] \n\"6\"->\"8\" [id = \"36\"] \n\"8\"->\"10\" [id = \"37\"] \n\"5\"->\"17\" [id = \"38\"] \n\"24\"->\"25\" [id = \"39\"] \n\"5\"->\"24\" [id = \"40\"] \n\"2\"->\"8\" [id = \"41\"] \n\"16\"->\"17\" [id = \"42\"] \n\"6\"->\"10\" [id = \"43\"] \n\"18\"->\"23\" [id = \"44\"] \n\"8\"->\"15\" [id = \"45\"] \n\"11\"->\"26\" [id = \"46\"] \n\"14\"->\"20\" [id = \"47\"] \n\"7\"->\"14\" [id = \"48\"] \n\"1\"->\"26\" [id = \"49\"] \n\"3\"->\"21\" [id = \"50\"] \n\"12\"->\"14\" [id = \"51\"] \n\"3\"->\"16\" [id = \"52\"] \n}","config":{"engine":["function (mat, widths = rep.int(1, ncol(mat)), heights = rep.int(1, ","    nrow(mat)), respect = FALSE) ","{","    storage.mode(mat) <- \"integer\"","    mat <- as.matrix(mat)","    if (!is.logical(respect)) {","        respect <- as.matrix(respect)","        if (!is.matrix(respect) || any(dim(respect) != dim(mat))) ","            stop(\"'respect' must be logical or matrix with same dimension as 'mat'\")","    }","    num.figures <- as.integer(max(mat))","    for (i in 1L:num.figures) if (match(i, mat, nomatch = 0L) == ","        0L) ","        stop(gettextf(\"layout matrix must contain at least one reference\\nto each of the values {1 ... %d}\\n\", ","            num.figures), domain = NA)","    dm <- dim(mat)","    num.rows <- dm[1L]","    num.cols <- dm[2L]","    cm.widths <- if (is.character(widths)) ","        grep(\"cm\", widths, fixed = TRUE)","    cm.heights <- if (is.character(heights)) ","        grep(\"cm\", heights, fixed = TRUE)","    pad1.rm.cm <- function(v, cm.v, len) {","        if ((ll <- length(v)) < len) ","            v <- c(v, rep.int(1, len - ll))","        if (is.character(v)) {","            wcm <- v[cm.v]","            v[cm.v] <- substring(wcm, 1L, nchar(wcm, type = \"c\") - ","                3)","            v <- chartr(getOption(\"OutDec\"), \".\", v)","        }","        as.numeric(v)","    }","    widths <- pad1.rm.cm(widths, cm.widths, len = num.cols)","    heights <- pad1.rm.cm(heights, cm.heights, len = num.rows)","    if (is.matrix(respect)) {","        respect.mat <- as.integer(respect)","        respect <- 2","    }","    else {","        respect.mat <- matrix(0L, num.rows, num.cols)","    }","    .External.graphics(C_layout, num.rows, num.cols, mat, as.integer(num.figures), ","        col.widths = widths, row.heights = heights, cm.widths, ","        cm.heights, respect = as.integer(respect), respect.mat)","    invisible(num.figures)","}"],"options":null}},"evals":[],"jsHooks":[]}</script>
<p>Interesting! And weâ€™re starting to visualize something of a useful insight, nodes that have greater connectedness than other nodes (distinguished by level of total degree) stand out by a visual aesthetic. This methodology is not limited to the visual either. We could, for instance, provide information on the nodes that have fulfilled the node degree requirements for reporting purposes. One can always retrieve the selection of nodes with the <code>get_selection()</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hi_deg_nodes &lt;-
<span class="st">  </span>graph_26n_52e %&gt;%
<span class="st">  </span><span class="kw">select_nodes_by_degree</span>(
    <span class="dt">expressions =</span> <span class="st">&quot;deg &gt;= 6&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">get_selection</span>()

<span class="co"># Report the node IDs that have</span>
<span class="co"># exceptionally high degree values</span>
<span class="kw">paste</span>(
  <span class="st">&quot;Nodes&quot;</span>, 
  <span class="kw">paste</span>(hi_deg_nodes, <span class="dt">collapse =</span> <span class="st">&quot;, &quot;</span>),
  <span class="st">&quot;all have high degree.&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Nodes 4, 5, 8, 14, 17, 20 all have high degree.&quot;</code></pre>
<p>Getting a targeted list of node IDs is a great start, however, node ID values arenâ€™t usually very meaningful to the end user. Usually, we ascribe labels to nodes to represent entities weâ€™d like to model in the graph. Examples include (unique) user names, gene identifers, project names, etc. So, letâ€™s get the values associated with the <code>label</code> and <code>values</code> node attributes in the selection. One strategy for doing this is involves the following sequence of functions: <code>select_nodes_by_degree()</code> (as before), <code>create_subgraph_ws()</code> to make a graph <em>subset</em> based on the selection of nodes, <code>get_node_df()</code> to return a data frame containing the graphâ€™s nodes and all attributes (the internal node data frame), and, finally, <strong>dplyr</strong>â€™s <code>select()</code> function to select only those data frame columns we want to keep (<code>label</code> and <code>value</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load in the dplyr package</span>
<span class="kw">library</span>(dplyr)</code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get a data frame of node `label`</span>
<span class="co"># and associated data values for</span>
<span class="co"># nodes with total degree &gt;= 6</span>
hi_deg_node_data &lt;-
<span class="st">  </span>graph_26n_52e %&gt;%
<span class="st">  </span><span class="kw">select_nodes_by_degree</span>(
    <span class="dt">expressions =</span> <span class="st">&quot;deg &gt;= 6&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">create_subgraph_ws</span>() %&gt;%
<span class="st">  </span><span class="kw">get_node_df</span>() %&gt;%
<span class="st">  </span>dplyr::<span class="kw">select</span>(label, value)

<span class="co"># Display the final data frame</span>
hi_deg_node_data</code></pre></div>
<pre><code>##   label value
## 1     D   7.5
## 2     E   8.5
## 3     H  10.0
## 4     N   3.5
## 5     Q   5.5
## 6     T   6.5</code></pre>
<p>This is more like it! But imagine that these label values could convey more meaning in a selected domain, like city names, species names, user names, or other names for things.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="creation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="selections.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
